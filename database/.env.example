# MSP Database Environment Configuration
# High Availability and Production Environment Settings

# =====================================================
# DATABASE CONFIGURATION
# =====================================================

# Primary Database Connection
DB_HOST=localhost
DB_PORT=5431  # HAProxy load balancer
DB_NAME=msp_enterprise
DB_USER=msp_admin
DB_PASSWORD=your_secure_password_here

# Replication Configuration
REPLICATION_USER=replicator
REPLICATION_PASSWORD=your_replication_password

# Connection Pool Settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# =====================================================
# HIGH AVAILABILITY CONFIGURATION
# =====================================================

# HAProxy Configuration
HAPROXY_STATS_USER=admin
HAPROXY_STATS_PASSWORD=your_haproxy_password

# PgPool Configuration
PGPOOL_PASSWORD=your_pgpool_password
PGPOOL_ADMIN_PASSWORD=your_pgpool_admin_password

# Consul Service Discovery
CONSUL_TOKEN=your_consul_token

# =====================================================
# CACHE AND SESSION MANAGEMENT
# =====================================================

# Redis Cluster Configuration
REDIS_PASSWORD=your_redis_password
REDIS_CLUSTER_NODES=redis-node-1:7000,redis-node-2:7001,redis-node-3:7002

# Session Configuration
SESSION_SECRET_KEY=your_session_secret_key
SESSION_TIMEOUT=3600

# =====================================================
# TIME-SERIES DATABASES
# =====================================================

# TimescaleDB Configuration
TIMESCALE_HOST=localhost
TIMESCALE_PORT=5435
TIMESCALE_DB=msp_timeseries
TIMESCALE_USER=timescale_admin
TIMESCALE_PASSWORD=your_timescale_password

# InfluxDB Configuration
INFLUX_HOST=localhost
INFLUX_PORT=8086
INFLUX_ORG=MSP-Enterprise
INFLUX_BUCKET=monitoring
INFLUX_TOKEN=your_influx_token
INFLUX_PASSWORD=your_influx_password

# ClickHouse Configuration
CLICKHOUSE_HOST=localhost
CLICKHOUSE_PORT=8123
CLICKHOUSE_DB=msp_analytics
CLICKHOUSE_USER=analytics_admin
CLICKHOUSE_PASSWORD=your_clickhouse_password

# =====================================================
# SEARCH AND ANALYTICS
# =====================================================

# Elasticsearch Configuration
ELASTICSEARCH_HOST=localhost
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_INDEX=msp_logs
ELASTICSEARCH_USER=elastic
ELASTICSEARCH_PASSWORD=your_elasticsearch_password

# =====================================================
# BACKUP AND DISASTER RECOVERY
# =====================================================

# Backup Configuration
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
RETENTION_DAYS=30
BACKUP_COMPRESSION=gzip
BACKUP_ENCRYPTION_KEY=your_backup_encryption_key

# AWS S3 Configuration for Backups
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-east-1
BACKUP_S3_BUCKET=msp-enterprise-backups

# Azure Blob Storage (Alternative)
AZURE_STORAGE_ACCOUNT=your_storage_account
AZURE_STORAGE_KEY=your_storage_key
AZURE_CONTAINER=msp-backups

# =====================================================
# MONITORING AND ALERTING
# =====================================================

# Prometheus Configuration
PROMETHEUS_HOST=localhost
PROMETHEUS_PORT=9090

# Grafana Configuration
GRAFANA_HOST=localhost
GRAFANA_PORT=3000
GRAFANA_USER=admin
GRAFANA_PASSWORD=your_grafana_password

# Alert Manager Configuration
ALERTMANAGER_WEBHOOK_URL=https://your-domain.com/webhooks/alerts
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/your/slack/webhook
EMAIL_SMTP_HOST=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_SMTP_USER=alerts@your-company.com
EMAIL_SMTP_PASSWORD=your_email_password

# =====================================================
# SECURITY CONFIGURATION
# =====================================================

# SSL/TLS Configuration
SSL_CERT_PATH=/etc/ssl/certs/msp-enterprise.crt
SSL_KEY_PATH=/etc/ssl/private/msp-enterprise.key
SSL_CA_PATH=/etc/ssl/certs/ca-bundle.crt

# Encryption Keys
DATABASE_ENCRYPTION_KEY=your_32_byte_encryption_key_here
FIELD_ENCRYPTION_KEY=your_field_encryption_key

# Authentication Configuration
JWT_SECRET_KEY=your_jwt_secret_key
JWT_EXPIRATION_HOURS=24
OAUTH_CLIENT_ID=your_oauth_client_id
OAUTH_CLIENT_SECRET=your_oauth_client_secret

# Two-Factor Authentication
TOTP_SECRET_KEY=your_totp_secret_key
SMS_API_KEY=your_sms_provider_api_key

# =====================================================
# COMPLIANCE AND AUDIT
# =====================================================

# Audit Logging
AUDIT_LOG_ENABLED=true
AUDIT_LOG_LEVEL=INFO
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years for compliance
AUDIT_SIEM_ENDPOINT=https://your-siem-system.com/api/logs

# Compliance Frameworks
HIPAA_COMPLIANCE_ENABLED=true
SOX_COMPLIANCE_ENABLED=true
GDPR_COMPLIANCE_ENABLED=true
PCI_DSS_COMPLIANCE_ENABLED=true

# Data Retention Policies
FINANCIAL_DATA_RETENTION_YEARS=7
CLIENT_DATA_RETENTION_YEARS=5
LOG_DATA_RETENTION_MONTHS=24
MONITORING_DATA_RETENTION_MONTHS=13

# =====================================================
# PERFORMANCE OPTIMIZATION
# =====================================================

# Database Performance Settings
SHARED_BUFFERS=2GB
EFFECTIVE_CACHE_SIZE=8GB
WORK_MEM=256MB
MAINTENANCE_WORK_MEM=1GB
MAX_CONNECTIONS=200
MAX_WORKER_PROCESSES=16

# Query Optimization
ENABLE_PARTITIONING=true
AUTO_VACUUM_ENABLED=true
QUERY_TIMEOUT_SECONDS=300
SLOW_QUERY_LOG_THRESHOLD_MS=1000

# Caching Configuration
REDIS_CACHE_TTL=300
QUERY_CACHE_SIZE=1000
QUERY_CACHE_TTL=600

# =====================================================
# APPLICATION CONFIGURATION
# =====================================================

# Company Information
COMPANY_NAME=Your MSP Company
COMPANY_DOMAIN=your-company.com
COMPANY_TIMEZONE=America/New_York
COMPANY_CURRENCY=USD
COMPANY_LOCALE=en_US

# Dashboard Configuration
DASHBOARD_REFRESH_INTERVAL=30  # seconds
MAX_DASHBOARD_WIDGETS=20
DASHBOARD_CACHE_TTL=180

# API Configuration
API_RATE_LIMIT=1000  # requests per hour per IP
API_VERSION=v1
API_TIMEOUT_SECONDS=30

# =====================================================
# DEVELOPMENT AND TESTING
# =====================================================

# Environment Settings
ENVIRONMENT=production  # development, staging, production
DEBUG_MODE=false
LOG_LEVEL=INFO
TESTING_MODE=false

# Development Database (if needed)
DEV_DB_HOST=localhost
DEV_DB_PORT=5432
DEV_DB_NAME=msp_enterprise_dev
DEV_DB_USER=msp_dev
DEV_DB_PASSWORD=dev_password

# Testing Configuration
TEST_DB_NAME=msp_enterprise_test
PYTEST_WORKERS=4
COVERAGE_THRESHOLD=80

# =====================================================
# INTEGRATION SETTINGS
# =====================================================

# CRM Integration
SALESFORCE_CLIENT_ID=your_salesforce_client_id
SALESFORCE_CLIENT_SECRET=your_salesforce_client_secret
HUBSPOT_API_KEY=your_hubspot_api_key

# ITSM Integration
SERVICENOW_INSTANCE=your_instance.servicenow.com
SERVICENOW_USERNAME=integration_user
SERVICENOW_PASSWORD=your_servicenow_password

# Communication APIs
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
SENDGRID_API_KEY=your_sendgrid_api_key

# Cloud Provider Integration
AWS_ASSUME_ROLE_ARN=arn:aws:iam::account:role/MSPRole
AZURE_TENANT_ID=your_azure_tenant_id
AZURE_CLIENT_ID=your_azure_client_id
AZURE_CLIENT_SECRET=your_azure_client_secret
GCP_PROJECT_ID=your_gcp_project_id
GCP_SERVICE_ACCOUNT_KEY=path_to_service_account.json

# =====================================================
# RESOURCE LIMITS AND SCALING
# =====================================================

# Container Resource Limits
MAX_MEMORY_USAGE=4GB
MAX_CPU_USAGE=2.0
MAX_DISK_USAGE=100GB

# Scaling Configuration
AUTO_SCALING_ENABLED=true
MIN_REPLICAS=2
MAX_REPLICAS=10
CPU_THRESHOLD=70
MEMORY_THRESHOLD=80

# Data Storage Paths
DATA_PATH=/var/lib/msp-enterprise
LOG_PATH=/var/log/msp-enterprise
BACKUP_PATH=/var/backups/msp-enterprise
TEMP_PATH=/tmp/msp-enterprise

# =====================================================
# HEALTH CHECKS AND MONITORING
# =====================================================

# Health Check Configuration
HEALTH_CHECK_INTERVAL=30  # seconds
HEALTH_CHECK_TIMEOUT=5    # seconds
HEALTH_CHECK_RETRIES=3

# System Monitoring Thresholds
CPU_ALERT_THRESHOLD=80
MEMORY_ALERT_THRESHOLD=85
DISK_ALERT_THRESHOLD=90
DATABASE_CONNECTION_ALERT_THRESHOLD=180

# SLA Monitoring
UPTIME_SLA_TARGET=99.9
RESPONSE_TIME_SLA_TARGET=500  # milliseconds
AVAILABILITY_CHECK_INTERVAL=60

# =====================================================
# SECURITY HARDENING
# =====================================================

# Password Policies
MIN_PASSWORD_LENGTH=12
REQUIRE_PASSWORD_COMPLEXITY=true
PASSWORD_EXPIRATION_DAYS=90
ACCOUNT_LOCKOUT_THRESHOLD=5
ACCOUNT_LOCKOUT_DURATION_MINUTES=30

# Network Security
ALLOWED_IP_RANGES=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16
FIREWALL_ENABLED=true
INTRUSION_DETECTION_ENABLED=true
DDoS_PROTECTION_ENABLED=true

# Data Security
ENCRYPTION_AT_REST_ENABLED=true
ENCRYPTION_IN_TRANSIT_ENABLED=true
KEY_ROTATION_ENABLED=true
KEY_ROTATION_INTERVAL_DAYS=90

# =====================================================
# DEPLOYMENT CONFIGURATION
# =====================================================

# Docker Configuration
DOCKER_REGISTRY=your-registry.com
DOCKER_IMAGE_TAG=latest
DOCKER_NETWORK_NAME=msp_ha_network

# Kubernetes Configuration (if using K8s)
KUBERNETES_NAMESPACE=msp-enterprise
KUBERNETES_SERVICE_ACCOUNT=msp-service-account
HELM_CHART_VERSION=1.0.0

# Load Balancer Configuration
LOAD_BALANCER_ALGORITHM=round_robin
HEALTH_CHECK_PATH=/health
STICKY_SESSIONS_ENABLED=true
SSL_TERMINATION_ENABLED=true

# =====================================================
# NOTIFICATION SETTINGS
# =====================================================

# Email Notifications
SMTP_HOST=smtp.your-domain.com
SMTP_PORT=587
SMTP_USE_TLS=true
FROM_EMAIL=noreply@your-company.com
ADMIN_EMAIL=admin@your-company.com

# Slack Notifications
SLACK_BOT_TOKEN=xoxb-your-slack-bot-token
SLACK_CHANNEL=#msp-alerts
SLACK_USERNAME=MSP-Bot

# SMS Notifications
SMS_PROVIDER=twilio
SMS_FROM_NUMBER=+1234567890
EMERGENCY_CONTACT_NUMBERS=+1234567891,+1234567892

# =====================================================
# AUDIT AND COMPLIANCE REPORTING
# =====================================================

# Automated Reports
DAILY_REPORT_ENABLED=true
WEEKLY_REPORT_ENABLED=true
MONTHLY_REPORT_ENABLED=true
QUARTERLY_REPORT_ENABLED=true

# Report Recipients
FINANCIAL_REPORT_RECIPIENTS=cfo@your-company.com,finance@your-company.com
OPERATIONAL_REPORT_RECIPIENTS=ops@your-company.com,management@your-company.com
SECURITY_REPORT_RECIPIENTS=security@your-company.com,compliance@your-company.com

# Compliance Reporting
SOX_QUARTERLY_REPORT=true
HIPAA_ANNUAL_REPORT=true
GDPR_BREACH_NOTIFICATION=true
PCI_QUARTERLY_SCAN=true